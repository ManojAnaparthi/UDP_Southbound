OVS UDP OpenFlow Comprehensive Test
====================================

This test will:
1. Start a UDP controller on port 6653
2. Wait for switch HELLO
3. Exchange FEATURES
4. Send SET_CONFIG
5. Install table-miss flow
6. Wait for PACKET_IN messages

Instructions:
1. In another terminal, run:
   sudo mn -c
   sudo mn --topo single,2 --controller remote,ip=127.0.0.1,port=6653
   
2. Once Mininet starts and shows "mininet>", run:
   pingall
   
3. Watch this terminal for PACKET_IN messages

Press Ctrl+C to stop.


============================================================
COMPREHENSIVE OVS UDP OPENFLOW TEST
============================================================
✓ UDP controller listening on 0.0.0.0:6653
✓ ECHO keepalive thread started

============================================================
PHASE 1: Testing HELLO Exchange
============================================================
Waiting for HELLO from switch...
  ← Received HELLO from ('127.0.0.1', 33309)
✓ HELLO received from ('127.0.0.1', 33309)
  → Sent HELLO (8 bytes)
✓ HELLO reply sent

============================================================
PHASE 2: Testing FEATURES Exchange
============================================================
  → Sent FEATURES_REQUEST (8 bytes)
Waiting for FEATURES_REPLY...
  ← Received FEATURES_REPLY from ('127.0.0.1', 33309)
✓ FEATURES_REPLY received, DPID: 0000ee7c34a3f649

============================================================
PHASE 3: Testing SET_CONFIG (WITH FIX!)
============================================================
  ⚠ WARNING: message length 12 not 8-byte aligned
  → Sent SET_CONFIG (12 bytes)
✓ SET_CONFIG sent (flags=0x0000, miss_send_len=128)
  Message hex: 0409000c0000000300000080
Checking for ERROR response (2 sec timeout)...
  ↔ Sent keepalive ECHO_REQUEST to ('127.0.0.1', 33309) (xid=4)
✗ ERROR received: Type=10, Code=0
  OFPET_SWITCH_CONFIG_FAILED
  OFPSCFC_BAD_FLAGS

Cleanup complete
